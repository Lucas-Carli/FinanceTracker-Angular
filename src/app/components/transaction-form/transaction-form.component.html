<!-- src/app/components/transaction-form/transaction-form.component.html -->
<div class="form-container">
  <!-- BotÃ³n para abrir modal -->
  <button class="open-modal-btn" (click)="openModal()">âž• Nueva TransacciÃ³n</button>

  <!-- Modal (solo se muestra si isModalOpen() es true) -->
  @if (isModalOpen()) {
  <div class="modal-overlay" (click)="onCloseModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <!-- Header del modal -->
      <div class="modal-header">
        <h2>âž• Agregar TransacciÃ³n</h2>
        <button class="close-btn" (click)="onCloseModal()">âœ•</button>
      </div>

      <!-- Formulario -->
      <form [formGroup]="transactionForm" (ngSubmit)="onSubmit()">
        <!-- Tipo de transacciÃ³n -->
        <div class="form-group">
          <label for="type">Tipo de TransacciÃ³n</label>
          <div class="radio-group">
            <label class="radio-label income">
              <input type="radio" formControlName="type" value="income" />
              <span>ðŸ’° Ingreso</span>
            </label>
            <label class="radio-label expense">
              <input type="radio" formControlName="type" value="expense" />
              <span>ðŸ’¸ Gasto</span>
            </label>
          </div>
        </div>

        <!-- Monto -->
        <div class="form-group">
          <label for="amount">Monto *</label>
          <input
            type="number"
            id="amount"
            formControlName="amount"
            placeholder="0.00"
            step="0.01"
            min="0"
            [class.error]="isFieldInvalid('amount')"
          />
          <span class="error-message" *ngIf="hasError('amount', 'required')">
            El monto es requerido
          </span>
          <span class="error-message" *ngIf="hasError('amount', 'min')">
            El monto debe ser mayor a 0
          </span>
        </div>

        <!-- DescripciÃ³n -->
        <div class="form-group">
          <label for="description">DescripciÃ³n *</label>
          <input
            type="text"
            id="description"
            formControlName="description"
            placeholder="Ej: Compra de supermercado"
            [class.error]="isFieldInvalid('description')"
          />
          <span class="error-message" *ngIf="hasError('description', 'required')">
            La descripciÃ³n es requerida
          </span>
          <span class="error-message" *ngIf="hasError('description', 'minlength')">
            MÃ­nimo 3 caracteres
          </span>
        </div>

        <!-- CategorÃ­a -->
        <div class="form-group">
          <label for="category">CategorÃ­a *</label>
          <select
            id="category"
            formControlName="category"
            [class.error]="isFieldInvalid('category')"
          >
            <option value="">Selecciona una categorÃ­a</option>
            <option *ngFor="let cat of currentCategories" [ngValue]="cat.name">
              <span *ngIf="cat.icon">{{ cat.icon }} </span>{{ cat.name }}
            </option>
          </select>
          <span class="error-message" *ngIf="hasError('category', 'required')">
            La categorÃ­a es requerida
          </span>
        </div>

        <!-- Fecha -->
        <div class="form-group">
          <label for="date">Fecha *</label>
          <input
            type="date"
            id="date"
            formControlName="date"
            [class.error]="isFieldInvalid('date')"
          />
          <span class="error-message" *ngIf="hasError('date', 'required')">
            La fecha es requerida
          </span>
        </div>

        <!-- Botones -->
        <div class="form-actions">
          <button type="button" class="btn-cancel" (click)="onCloseModal()">Cancelar</button>
          <button type="submit" class="btn-submit" [disabled]="transactionForm.invalid">
            ðŸ’¾ Guardar
          </button>
        </div>
      </form>
    </div>
  </div>
  }
</div>
